<div class="pt-32pt">
  <div class="container page__container d-flex flex-column flex-md-row align-items-center text-center text-sm-left">
    <div class="flex d-flex flex-column flex-sm-row align-items-center">
      <div class="mb-24pt mb-sm-0 mr-sm-24pt">
        <h2 class="mb-0">Courses</h2>
        <ol class="breadcrumb p-0 m-0">
          <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
          <li class="breadcrumb-item active">Courses</li>
        </ol>
      </div>
    </div>
    <div class="row" role="tablist">
      <div class="col-auto">
        <a [routerLink]="['create']" class="btn btn-outline-primary" *ngIf="permission.create">Add Course</a>
      </div>
    </div>
  </div>
</div>

<div class="container page__container">
  <div class="page-section">
    <ng-container *ngIf="loading">
      <div class="text-center loading-icon">
        <img src="/assets/images/loading.svg" />
      </div>
    </ng-container>
    <!-- <div class="page-separator">
      <div class="page-separator__text">Required Courses</div>
    </div> -->
    <div class="row card-group-row" *ngIf="!loading">
      <div class="col-lg-4 card-group-row__col" *ngFor="let course of courses">
        <div class="card card-course w-100">
          <a [routerLink]="['/courses', course.id]">
            <img src="/assets/images/bg-course.jpg" height="140" class="w-100" alt="course" />

            <div class="overlay__content">
              <div class="w-100 mx-3">
                <h5 class="text-white m-0">{{ course.title }}</h5>
              </div>
            </div>
          </a>
          <div class="card-body flex">
            <div class="media align-items-start">
              <div class="media-body">
                <a [routerLink]="['/courses', course.id]" class="card-title">{{
                  course.courseDepartment.title
                  }}</a>
                <small class="text-50 font-weight-bold mb-4pt">{{
                  course.code + " - " + course.level
                  }}</small>
              </div>
              <div class="buttons">
                <a [routerLink]="['update', course.id]" *ngIf="permission.update">
                  <i class="material-icons fa-lg mr-2">edit</i></a>
                <a href="#" data-toggle="modal" data-target="#deleteCourse" (click)="setCourse(course)"
                  *ngIf="permission.delete"><i class="material-icons fa-lg">delete</i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteCourse" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true" *ngIf="permission.delete">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Delete Course</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeModal>
          <i class="material-icons">close</i>
        </button>
      </div>
      <div class="modal-body text-left" *ngIf="courseSelected">
        <div class="form-group">
          <h6 class="text-primary">Title:</h6>
          <p>{{ courseSelected.title }}</p>
        </div>
        <div class="form-group">
          <h6 class="text-primary">About:</h6>
          <p [innerHTML]="courseSelected.about"></p>
        </div>
        <div class="form-group">
          <h6 class="text-primary">Department:</h6>
          <p>{{ courseSelected.courseDepartment.title }}</p>
        </div>
        <div class="form-group" *ngIf="courseSelected.courseInstructors.length > 0">
          <h6 class="text-primary">Instructor:</h6>
          <p>{{ courseSelected.courseInstructors[0].name }}</p>
        </div>
        <p class="text-danger h6 bold">Do you want to remove this course?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-danger" (click)="deleteCourse()">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>